<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åŠ¨æ€éªŒæ”¶æ¸…å• - 2026ç‰ˆç‡ƒæ²¹è½¦</title>
    <style>
        :root {
            --primary-color: #3498db;
            --success-color: #2ecc71;
            --danger-color: #e74c3c;
            --bg-color: #f4f7f6;
            --card-bg: #ffffff;
            --text-color: #2c3e50;
        }

        body {
            font-family: "PingFang SC", "Microsoft YaHei", sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
        }

        h1 {
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .tip-banner {
            background-color: #fff3f3;
            border-left: 5px solid var(--danger-color);
            padding: 15px;
            margin-bottom: 25px;
            border-radius: 4px;
            font-size: 0.95em;
        }

        .module {
            background: var(--card-bg);
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            padding: 20px;
            margin-bottom: 25px;
            border: 1px solid #eee;
        }

        h2 {
            color: var(--primary-color);
            font-size: 1.25rem;
            margin-top: 0;
            border-bottom: 2px solid #f0f0f0;
            padding-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .item-list {
            list-style: none;
            padding: 0;
            margin: 15px 0;
        }

        .item-row {
            display: flex;
            align-items: center;
            padding: 10px;
            border-bottom: 1px solid #f9f9f9;
            transition: background 0.2s;
        }

        .item-row:hover {
            background-color: #fcfcfc;
        }

        .item-row.checked {
            color: #95a5a6;
            text-decoration: line-through;
        }

        input[type="checkbox"] {
            width: 20px;
            height: 20px;
            margin-right: 12px;
            cursor: pointer;
        }

        .item-text {
            flex-grow: 1;
        }

        .actions {
            position: sticky;
            bottom: 20px;
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 40px;
        }

        button {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .btn-add {
            background-color: #f0f0f0;
            color: #666;
            font-size: 0.85em;
            padding: 5px 12px;
        }

        .btn-add:hover {
            background-color: var(--primary-color);
            color: white;
        }

        .btn-download {
            background-color: var(--primary-color);
            color: white;
            box-shadow: 0 4px 15px rgba(52, 152, 219, 0.3);
        }

        .btn-clear {
            background-color: var(--danger-color);
            color: white;
        }

        .btn-save {
            background-color: var(--success-color);
            color: white;
        }

        @media print {
            .actions, .btn-add, .delete-btn {
                display: none !important;
            }
            body {
                background: white;
                padding: 0;
            }
            .module {
                box-shadow: none;
                border: 1px solid #ccc;
                break-inside: avoid;
            }
        }

        .delete-btn {
            color: #ccc;
            background: none;
            border: none;
            padding: 0 5px;
            font-size: 18px;
        }
        
        .delete-btn:hover {
            color: var(--danger-color);
        }

        .modal {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.5);
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        
        .modal-content {
            background: white;
            padding: 20px;
            border-radius: 8px;
            width: 90%;
            max-width: 400px;
        }
        
        .modal-input {
            width: 100%;
            padding: 10px;
            margin: 15px 0;
            box-sizing: border-box;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>æ–°è½¦æè½¦éªŒæ”¶æ¸…å•</h1>
        <p>ä¸“ä¸šã€å…¨é¢ã€å¯è‡ªå®šä¹‰çš„è´­è½¦ä¼´ä¾£</p>
    </header>

    <div class="tip-banner">
        <strong>ğŸ’¡ æ ¸å¿ƒæé†’ï¼š</strong>å…ˆéªŒè½¦ â†’ å†ä»˜æ¬¾ â†’ æœ€åç­¾æ”¶ï¼<br>
        éªŒè½¦å‰åŠ¡å¿…æ´—è½¦ï¼Œåœ¨å……è¶³çš„å…‰çº¿ä¸‹è¿›è¡Œï¼Œå…¨ç¨‹æ‹ç…§ç•™è¯ã€‚
    </div>

    <div id="checklist-container">
        <!-- æ¨¡å—å°†ç”± JS åŠ¨æ€æ¸²æŸ“ -->
    </div>

    <div class="actions">
        <button class="btn-download" onclick="window.print()">
            ğŸ“¥ ä¸‹è½½/æ‰“å°æ¸…å•
        </button>
        <button class="btn-clear" onclick="clearData()">
            ğŸ—‘ï¸ æ¸…ç©ºè¿›åº¦
        </button>
    </div>
</div>

<!-- æ·»åŠ é¡¹çš„å¼¹çª— -->
<div id="addModal" class="modal">
    <div class="modal-content">
        <h3>æ·»åŠ æ–°æ¸…å•é¡¹</h3>
        <input type="text" id="newItemInput" class="modal-input" placeholder="è¾“å…¥éªŒæ”¶é¡¹å†…å®¹...">
        <div style="display: flex; gap: 10px; justify-content: flex-end;">
            <button onclick="closeModal()">å–æ¶ˆ</button>
            <button class="btn-save" onclick="confirmAddItem()">ç¡®è®¤æ·»åŠ </button>
        </div>
    </div>
</div>

<script>
    // åˆå§‹æ•°æ®ç»“æ„ï¼ˆåŸºäºä¸Šä¼ æ–‡æ¡£ï¼‰
    const defaultData = [
        {
            title: "1. éªŒè½¦å‰å¿…å¤‡ç‰©å“",
            items: ["èº«ä»½è¯ã€é©¾é©¶è¯", "è´­è½¦åˆåŒã€æ”¶æ®", "ä¸é™é¢é“¶è¡Œå¡", "æ¹¿çº¸å·¾ï¼ˆåŒºåˆ†çœŸå‡åˆ’ç—•ï¼‰", "æ‰‹æœºé—ªå…‰ç¯", "å……ç”µå®ã€æ•°æ®çº¿"]
        },
        {
            title: "2. èº«ä»½ä¸ç¼–ç æ ¸å¯¹",
            items: ["å‰æŒ¡é£ç»ç’ƒVINç ", "å‰¯é©¾é©¶BæŸ±é“­ç‰ŒVINç ", "å‘åŠ¨æœºèˆ±VINç ", "VINç ä¸å‘ç¥¨ã€åˆæ ¼è¯ä¸€è‡´", "å‡ºå‚æ—¥æœŸâ‰¤6ä¸ªæœˆ", "è½¦æ¶å·ç¬¬10ä½åŒ¹é…å¹´ä»½"]
        },
        {
            title: "3. å¤–è§‚å…¨é¢æ£€æµ‹",
            items: ["æ¼†é¢ï¼šæ— è‰²å·®ã€åˆ’ç—•ã€å‡¹å‘", "ç¼éš™ï¼šè½¦é—¨/å¼•æ“ç›–ç¼éš™å‡åŒ€", "ç»ç’ƒï¼šå…¨è½¦æ—¥æœŸæ—©äºå‡ºå‚æ—¥æœŸ", "è½®èƒï¼šDOTç¼–ç æ—¥æœŸä¸€è‡´ï¼Œèƒæ¯›å®Œå¥½", "åº•ç›˜ï¼šæ— é”ˆèš€ã€ç£•ç¢°ã€æ¸—æ¼"]
        },
        {
            title: "4. åŠ¨åŠ›ç³»ç»Ÿæ£€æµ‹",
            items: ["å†·å¯åŠ¨ï¼š3ç§’å†…æˆåŠŸï¼Œæ€ é€Ÿç¨³å®š", "æœºæ²¹ï¼šæ¶²ä½æ­£å¸¸ï¼Œé¢œè‰²æ·¡é»„", "æ²¹æ¶²ï¼šç»ç’ƒæ°´ã€å†·å´æ¶²æ¶²ä½æ­£å¸¸", "å˜é€Ÿç®±ï¼šæ¢æŒ¡é¡ºç•…æ— é¡¿æŒ«", "æ’æ°”ç®¡ï¼šå†…å£æ— å¤§é‡é»‘æ¸"]
        },
        {
            title: "5. å†…é¥°ä¸åŠŸèƒ½éªŒè¯",
            items: ["é‡Œç¨‹ï¼šä»ªè¡¨ç›˜â‰¤50km", "é’¥åŒ™ï¼š2æŠŠé½å…¨ä¸”æ„Ÿåº”çµæ•", "åº§æ¤…ï¼šæ— åˆ’ç—•æ±¡æ¸ï¼Œè°ƒèŠ‚é¡ºæ»‘", "ä¸­æ§ï¼šå±å¹•æ— åç‚¹ï¼Œå„æ¥å£æ­£å¸¸", "ç©ºè°ƒï¼šåˆ¶å†·åˆ¶çƒ­åŠé£é‡æ­£å¸¸", "ç¯å…‰ï¼šå…¨è½¦ç¯ç»„åŠŸèƒ½å¯ç”¨"]
        },
        {
            title: "6. æ–‡ä»¶ä¸éšè½¦ç‰©å“",
            items: ["å‘ç¥¨ã€åˆæ ¼è¯ã€ä¸€è‡´æ€§è¯ä¹¦", "ä¸‰åŒ…å‡­è¯ã€ä¿å…»æ‰‹å†Œ", "ä¿é™©å•ã€PDIæŠ¥å‘Š", "å¤‡èƒã€åƒæ–¤é¡¶ã€æ‰³æ‰‹ã€æ‹–è½¦é’©", "ç­ç«å™¨ã€ä¸‰è§’ç‰Œã€åå…‰è¡£"]
        }
    ];

    let currentData = [];
    let checkedState = {};
    let activeModuleIndex = null;

    // åˆå§‹åŒ–åŠ è½½
    function init() {
        const savedData = localStorage.getItem('car_checklist_data');
        const savedState = localStorage.getItem('car_checklist_state');
        
        currentData = savedData ? JSON.parse(savedData) : defaultData;
        checkedState = savedState ? JSON.parse(savedState) : {};
        
        render();
    }

    // æ¸²æŸ“é¡µé¢
    function render() {
        const container = document.getElementById('checklist-container');
        container.innerHTML = '';

        currentData.forEach((module, mIdx) => {
            const moduleDiv = document.createElement('div');
            moduleDiv.className = 'module';
            
            let itemsHtml = module.items.map((item, iIdx) => {
                const id = `item-${mIdx}-${iIdx}`;
                const isChecked = checkedState[id] ? 'checked' : '';
                return `
                    <li class="item-row ${isChecked}">
                        <input type="checkbox" id="${id}" ${checkedState[id] ? 'checked' : ''} onchange="toggleCheck('${id}')">
                        <span class="item-text">${item}</span>
                        ${mIdx >= defaultData.length || iIdx >= (defaultData[mIdx]?.items.length || 0) ? `<button class="delete-btn" onclick="deleteItem(${mIdx}, ${iIdx})">Ã—</button>` : ''}
                    </li>
                `;
            }).join('');

            moduleDiv.innerHTML = `
                <h2>
                    <span>${module.title}</span>
                    <button class="btn-add" onclick="openAddItemModal(${mIdx})">+ æ·»åŠ </button>
                </h2>
                <ul class="item-list">
                    ${itemsHtml}
                </ul>
            `;
            container.appendChild(moduleDiv);
        });
    }

    // å‹¾é€‰å¤„ç†
    function toggleCheck(id) {
        checkedState[id] = document.getElementById(id).checked;
        saveState();
        render();
    }

    // æ·»åŠ æ–°é¡¹
    function openAddItemModal(index) {
        activeModuleIndex = index;
        document.getElementById('addModal').style.display = 'flex';
        document.getElementById('newItemInput').focus();
    }

    function closeModal() {
        document.getElementById('addModal').style.display = 'none';
        document.getElementById('newItemInput').value = '';
    }

    function confirmAddItem() {
        const val = document.getElementById('newItemInput').value.trim();
        if (val) {
            currentData[activeModuleIndex].items.push(val);
            saveData();
            render();
            closeModal();
        }
    }

    // åˆ é™¤é¡¹
    function deleteItem(mIdx, iIdx) {
        currentData[mIdx].items.splice(iIdx, 1);
        saveData();
        render();
    }

    // æ•°æ®æŒä¹…åŒ–
    function saveData() {
        localStorage.setItem('car_checklist_data', JSON.stringify(currentData));
    }

    function saveState() {
        localStorage.setItem('car_checklist_state', JSON.stringify(checkedState));
    }

    function clearData() {
        if (confirm('ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰è¿›åº¦å’Œè‡ªå®šä¹‰é¡¹å—ï¼Ÿ')) {
            localStorage.removeItem('car_checklist_data');
            localStorage.removeItem('car_checklist_state');
            location.reload();
        }
    }

    // åˆå§‹è°ƒç”¨
    init();

    // ç›‘å¬å›è½¦é”®æ·»åŠ 
    document.getElementById('newItemInput').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') confirmAddItem();
    });
</script>

</body>
</html>
